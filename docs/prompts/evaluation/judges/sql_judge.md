# **ğŸ—„ï¸ SQL Judge Prompt**

Evaluate SQL query correctness.


---


## **ğŸ“ Location**

[`prompts/evaluation/judges/sql_judge.prompt`](../../../../prompts/evaluation/judges/sql_judge.prompt)


---


## **ğŸ·ï¸ Prompt Name**

`evaluation_sql_judge`


---


## **ğŸ’¡ Purpose**

Judge whether the chatbot's SQL operations correctly answer the user's question.


---


## **ğŸ“¥ Input Variables**

| Variable | Description | Source |
|----------|-------------|--------|
| `current_date` | Current date for context | Auto-generated |
| `context` | Chatbot context (client/customer) | Config |
| `schema` | Database schema | Config |
| `question` | User's original question | Test case input |
| `expected_sql` | Reference SQL (single or list) | Test case `expected_output.sql` |
| `expected_result` | Expected query result | **Auto-generated** by running `expected_sql` |
| `sql_operations` | Actual SQL operations executed | Extracted from agent steps |

> ğŸ’¡ **Note:** `expected_result` is auto-generated by running `expected_sql` against the real database. You only need to provide `sql` in your test case - no need to manually write expected results.


---


## **ğŸ“¤ Output Format**

```json
{
  "result_match": {
    "score": 0.0-1.0,
    "reasoning": "Do the operations correctly fulfill the request?"
  },
  "efficiency": {
    "score": 0.0-1.0,
    "reasoning": "Is the SQL efficient?"
  }
}
```


---


## **ğŸ“Š Scoring Criteria**


### âœ… **result_match**

| Score | Meaning |
|-------|---------|
| 1.0 | Results exactly match expected |
| 0.7+ | Results correct, minor differences |
| 0.5 | Partial match |
| 0.0 | Wrong results |


### âš¡ **efficiency**

| Score | Meaning |
|-------|---------|
| 1.0 | Optimal query |
| 0.7+ | Acceptable, minor inefficiencies |
| 0.5 | Unnecessary JOINs or subqueries |
| 0.0 | Very inefficient |


---


## **ğŸ“ Key Rules**

- Focus on **results**, not exact SQL syntax
- Hardcoded dates that produce correct results are acceptable
- For INSERT/UPDATE: verify operations executed correctly
- For SELECT: compare expected_result with actual
