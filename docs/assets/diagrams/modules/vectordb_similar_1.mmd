flowchart TD
    START[Product ID: 10] --> GET[1. Get product from Qdrant]

    GET --> |filter: product_id=10| QDRANT[(Qdrant Vector DB)]
    QDRANT --> |with_vectors=true| RECORD[Product Record]

    RECORD --> CHECK{Product found?}
    CHECK -->|No| EMPTY[Return empty results]

    CHECK -->|Yes| EXTRACT[2. Extract embedding vector]
    EXTRACT --> VECTOR[Gaming Chair Vector<br/>float 1536 dims]

    VECTOR --> SEARCH[3. Search similar vectors]
    SEARCH --> |cosine similarity| QDRANT2[(Qdrant Vector DB)]

    QDRANT2 --> |top_k + 1 results| RAW[Raw Results]

    RAW --> FILTER[4. Exclude original product]
    FILTER --> |remove product_id=10| FILTERED[Filtered Results]

    FILTERED --> RESULTS[5. Return similar products]

    classDef start fill:#dbeafe,stroke:#3b82f6,stroke-width:2px,color:#1e40af
    classDef process fill:#cffafe,stroke:#06b6d4,stroke-width:2px,color:#0e7490
    classDef db fill:#fce7f3,stroke:#ec4899,stroke-width:2px,color:#be185d
    classDef decision fill:#fef3c7,stroke:#f59e0b,stroke-width:2px,color:#b45309
    classDef filter fill:#fed7aa,stroke:#f97316,stroke-width:2px,color:#c2410c
    classDef output fill:#d1fae5,stroke:#10b981,stroke-width:2px,color:#065f46

    class START start
    class GET,EXTRACT,SEARCH process
    class QDRANT,QDRANT2 db
    class CHECK decision
    class RECORD,VECTOR,RAW process
    class FILTER,FILTERED filter
    class EMPTY,RESULTS output
