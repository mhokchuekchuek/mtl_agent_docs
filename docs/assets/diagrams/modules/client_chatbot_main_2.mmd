flowchart LR
    1[1. Receive query] --> 2[2. TranslationAgent detects language]
    2 --> 3[3. Translate to English]
    3 --> 4[4. OrchestratorAgent classifies intent]
    4 --> 5{5. Route by intent}
    5 --> |CHAT_HISTORY| 6[6. ChatHistoryAgent queries store]
    5 --> |INSIGHT| 7[7. InsightAgent runs SQL + chart]
    6 --> 8[8. Translate response back]
    7 --> 8
    8 --> 9[9. Return response]

    classDef input fill:#dbeafe,stroke:#3b82f6,stroke-width:2px,color:#1e40af
    classDef translate fill:#fef3c7,stroke:#f59e0b,stroke-width:2px,color:#b45309
    classDef orchestrator fill:#ede9fe,stroke:#8b5cf6,stroke-width:2px,color:#5b21b6
    classDef decision fill:#fed7aa,stroke:#f97316,stroke-width:2px,color:#c2410c
    classDef agent fill:#cffafe,stroke:#06b6d4,stroke-width:2px,color:#0e7490
    classDef output fill:#d1fae5,stroke:#10b981,stroke-width:2px,color:#065f46

    class 1 input
    class 2,3,8 translate
    class 4 orchestrator
    class 5 decision
    class 6,7 agent
    class 9 output
