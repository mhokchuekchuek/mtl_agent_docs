flowchart TD
    A["Data: 3 rows<br/>Columns: category, sales"] --> B[Compile prompt with schema]
    B --> C["LLM: 'Create bar chart'"]
    C --> D["Code: fig = px.bar(df, x='category', y='sales')"]
    D --> E[Execute in sandbox]
    E --> F[Convert to HTML]
    F --> G["<div id='plotly-chart'>...</div>"]

    classDef data fill:#dbeafe,stroke:#3b82f6,stroke-width:2px,color:#1e40af
    classDef process fill:#cffafe,stroke:#06b6d4,stroke-width:2px,color:#0e7490
    classDef llm fill:#ede9fe,stroke:#8b5cf6,stroke-width:2px,color:#5b21b6
    classDef output fill:#d1fae5,stroke:#10b981,stroke-width:2px,color:#065f46

    class A data
    class B,E,F process
    class C,D llm
    class G output
